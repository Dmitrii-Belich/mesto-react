{"version":3,"sources":["images/logo.svg","utils/Api.js","utils/constants.js","contexts/CurrentUserContext.js","components/Header.js","components/Footer.js","components/Card.js","components/Main.js","components/Popup.js","components/PopupWithImage.js","components/ui/Input.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteCardPopup.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","api","baseUrl","headers","this","_baseUrl","_headers","_defaultCheck","res","ok","json","Promise","reject","status","fetch","then","id","method","object","body","JSON","stringify","link","card","authorization","CurrentUserContext","React","createContext","Header","className","src","logo","alt","Footer","Date","getFullYear","Card","onCardClick","url","title","likes","ownerId","cardId","onCardLike","onCardDelete","userId","useContext","_id","isLiked","some","item","onClick","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","onLike","onDelete","name","about","avatar","map","owner","key","Popup","isOpen","onClose","children","PopupWithImage","Input","pattern","required","placeholder","value","maxLength","minLength","onChange","type","update","useState","isInputValid","setIsInputValid","validationMessage","setValidationMessage","useEffect","evt","target","validity","valid","PopupWithForm","onSubmit","buttonText","isFormValid","noValidate","disabled","EditProfilePopup","onUpdateUser","currentUser","description","setValidity","setButtonText","setName","setDescription","inputChangers","inputHandler","inputValidity","newValidity","Object","assign","clearInput","setTimeout","preventDefault","catch","values","reduce","summ","currentItem","EditAvatarPopup","onUpdateAvatar","setUrl","AddPlacePopup","setTitle","App","editPopupState","setEditPopupState","addPopupState","setAddPopupState","avatarPopupState","setAvatarPopupState","deletePopupState","setDeletePopupState","imgPopupState","setImgPopupState","selectedCard","setSelectedCard","setCurrentUser","setCards","errShow","err","console","log","all","getUserInformation","getInitialCards","closeAllPopups","handleUpdateUser","a","isSucssesful","setUserInfo","resolve","handleUpdateAvatar","setUserAvatar","handleAddPlaceSubmit","createCard","newCard","handleDeleteSubmit","deleteCard","newCards","filter","Provider","likeShow","deleteLike","setLike","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"oGAAAA,EAAOC,QAAU,IAA0B,kC,gMCwE9BC,EAAM,I,WArEjB,cAAmC,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,QAAW,oBAChCC,KAAKC,SAAWH,EAChBE,KAAKE,SAAWH,EAChBC,KAAKG,cAAgB,SAACC,GACpB,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,gDAA0BJ,EAAIK,U,8DAKvC,OAAOC,MAAM,GAAD,OAAIV,KAAKC,SAAT,UAA2B,CAAEF,QAASC,KAAKE,WAAYS,KACjEX,KAAKG,iB,2CAKP,OAAOO,MAAM,GAAD,OAAIV,KAAKC,SAAT,aAA8B,CAAEF,QAASC,KAAKE,WAAYS,KACpEX,KAAKG,iB,8BAIDS,GACN,OAAOF,MAAM,GAAD,OAAIV,KAAKC,SAAT,wBAAiCW,GAAM,CACjDC,OAAQ,MACRd,QAASC,KAAKE,WACbS,KAAKX,KAAKG,iB,iCAGJS,GACT,OAAOF,MAAM,GAAD,OAAIV,KAAKC,SAAT,wBAAiCW,GAAM,CACjDC,OAAQ,SACRd,QAASC,KAAKE,WACbS,KAAKX,KAAKG,iB,kCAGHW,GACV,OAAOJ,MAAM,GAAD,OAAIV,KAAKC,SAAT,aAA8B,CACxCY,OAAQ,QACRd,QAASC,KAAKE,SACda,KAAMC,KAAKC,UAAUH,KACpBH,KAAKX,KAAKG,iB,oCAGDe,GACZ,OAAOR,MAAM,GAAD,OAAIV,KAAKC,SAAT,oBAAqC,CAC/CY,OAAQ,QACRd,QAASC,KAAKE,SACda,KAAMC,KAAKC,UAAUC,KACpBP,KAAKX,KAAKG,iB,iCAGJgB,GACT,OAAOT,MAAM,GAAD,OAAIV,KAAKC,SAAT,UAA2B,CACrCY,OAAQ,OACRd,QAASC,KAAKE,SACda,KAAMC,KAAKC,UAAUE,KACpBR,KAAKX,KAAKG,iB,iCAGJS,GACT,OAAOF,MAAM,GAAD,OAAIV,KAAKC,SAAT,kBAA2BW,GAAM,CAC3CC,OAAQ,SACRd,QAASC,KAAKE,WACbS,KAAKX,KAAKG,mB,KAIE,CCxEO,CACxBL,QAAS,8CACTC,QAAS,CACPqB,cAAe,uCACf,eAAgB,sBCFPC,EAAqBC,IAAMC,gB,iBCCzB,SAASC,IACtB,OACE,4BAAQC,UAAU,UAChB,yBAAKC,IAAKC,IAAMC,IAAI,6CAAUH,UAAU,kBCJ/B,SAASI,IACtB,OACE,4BAAQJ,UAAU,UAChB,uBAAGA,UAAU,qBAAb,SACU,IAAIK,MAAOC,cADrB,kBCDS,SAASC,EAAT,GASX,IARFC,EAQC,EARDA,YACAC,EAOC,EAPDA,IACAC,EAMC,EANDA,MACAC,EAKC,EALDA,MACAC,EAIC,EAJDA,QACAC,EAGC,EAHDA,OACAC,EAEC,EAFDA,WACAC,EACC,EADDA,aAEaC,EAAWnB,IAAMoB,WAAWrB,GAAjCsB,IAEFC,EAAUR,EAAMS,MAAK,SAACC,GAC1B,OAAOA,EAAKH,MAAQF,KAGtB,OACE,yBAAKhB,UAAU,QACb,yBACEG,IAAI,sHACJH,UAAU,cACVsB,QAAS,WACPd,EAAY,CACVC,IAAKA,EACLC,MAAOA,KAGXT,IAAKQ,IAEP,wBAAIT,UAAU,eAAeU,GAC7B,4BACEY,QAAS,WACPR,EAAWD,EAAQM,IAErBnB,UAAS,qBAAgBmB,GAAW,4BAEtC,uBAAGnB,UAAU,oBAAoBW,EAAMY,QACtCX,IAAYI,GACX,4BACEhB,UAAU,eACVsB,QAAS,WACPP,EAAaF,OCxCV,SAASW,EAAT,GAQX,IAPFC,EAOC,EAPDA,aACAC,EAMC,EANDA,cACAC,EAKC,EALDA,WACAnB,EAIC,EAJDA,YACAoB,EAGC,EAHDA,MACAC,EAEC,EAFDA,OACAC,EACC,EADDA,SACC,EAE+BjC,IAAMoB,WAAWrB,GAAzCmC,EAFP,EAEOA,KAAMC,EAFb,EAEaA,MAAOC,EAFpB,EAEoBA,OAErB,OACE,8BACE,6BAASjC,UAAU,WACjB,yBAAKA,UAAU,+DACb,yBAAKG,IAAI,uCAASH,UAAU,kBAAkBC,IAAKgC,IACnD,4BACEjC,UAAU,0BACVsB,QAASG,IAEX,yBAAKzB,UAAU,iBACb,yBAAKA,UAAU,4DACb,wBAAIA,UAAU,iBAAiB+B,GAC/B,4BACE/B,UAAU,uBACVsB,QAASI,KAGb,uBAAG1B,UAAU,qBAAqBgC,KAGtC,4BAAQhC,UAAU,sBAAsBsB,QAASK,KAGnD,6BAAS3B,UAAU,mBAChB4B,EAAMM,KAAI,SAACb,GACV,OACE,kBAACd,EAAD,CACEC,YAAaA,EACbG,MAAOU,EAAKV,MACZC,QAASS,EAAKc,MAAMjB,IACpBkB,IAAKf,EAAKH,IACVR,MAAOW,EAAKU,KACZtB,IAAKY,EAAK5B,KACVoB,OAAQQ,EAAKH,IACbJ,WAAYe,EACZd,aAAce,SClDb,SAASO,EAAT,GAA+C,IAA9BC,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,SAC/C,OACE,yBAAKxC,UAAS,gBAAWsC,GAAU,yBAChCE,EACD,yBAAKxC,UAAU,iBAAiBsB,QAASiB,KCFhC,SAASE,EAAT,GAAoD,IAA1BH,EAAyB,EAAzBA,OAAQ5C,EAAiB,EAAjBA,KAAM6C,EAAW,EAAXA,QACrD,OACE,kBAACF,EAAD,CAAOC,OAAQA,EAAQC,QAASA,GAC9B,yBAAKvC,UAAU,0BACb,yBAAKG,IAAKT,EAAKgB,MAAOV,UAAU,eAAeC,IAAKP,EAAKe,MACzD,wBAAIT,UAAU,sBAAsBN,EAAKgB,OACzC,4BAAQV,UAAU,qBAAqBsB,QAASiB,MCRzC,SAASG,EAAT,GAWX,IAVFX,EAUC,EAVDA,KACAY,EASC,EATDA,QACAC,EAQC,EARDA,SACAC,EAOC,EAPDA,YACAC,EAMC,EANDA,MACAC,EAKC,EALDA,UACAC,EAIC,EAJDA,UACAC,EAGC,EAHDA,SACAC,EAEC,EAFDA,KACAC,EACC,EADDA,OACC,EACuCtD,IAAMuD,UAAS,GADtD,mBACMC,EADN,KACoBC,EADpB,OAEiDzD,IAAMuD,SAAS,IAFhE,mBAEMG,EAFN,KAEyBC,EAFzB,KAID3D,IAAM4D,WAAU,WACdH,GAAgB,GAChBE,EAAqB,MACpB,CAACL,IAQJ,OACE,oCACE,2BACED,KAAMA,EACNlD,UAAS,wBACNqD,GAAgB,8BAEnBV,QAASA,EACTZ,KAAMA,EACNa,SAAUA,EACVC,YAAaA,EACbI,SAjBgB,SAACS,GACrBT,EAASS,EAAIC,OAAOb,MAAOf,EAAM2B,EAAIC,OAAOC,SAASC,OACrDP,EAAgBI,EAAIC,OAAOC,SAASC,OACpCL,EAAqBE,EAAIC,OAAOJ,oBAe5BT,MAAOA,EACPC,UAAWA,EACXC,UAAWA,IAEb,0BAAMhD,UAAU,sBAAsBuD,ICxC7B,SAASO,EAAT,GASX,IARFxB,EAQC,EARDA,OACAC,EAOC,EAPDA,QACAwB,EAMC,EANDA,SACArD,EAKC,EALDA,MACAsD,EAIC,EAJDA,WACAxB,EAGC,EAHDA,SACAT,EAEC,EAFDA,KACAkC,EACC,EADDA,YAEA,OACE,kBAAC5B,EAAD,CAAOC,OAAQA,EAAQC,QAASA,GAC9B,0BACEvC,UAAU,mBACV+B,KAAMA,EACNmC,YAAU,EACVH,SAAUA,GAEV,wBAAI/D,UAAU,gBAAgBU,GAC7B8B,EACD,4BACEU,KAAK,SACLlD,UAAS,uBACNiE,GAAe,6BAElBE,UAAWF,GAAe,YAEzBD,GAEH,4BACEd,KAAK,SACLlD,UAAU,qBACVsB,QAASiB,MC9BJ,SAAS6B,EAAT,GAA8D,IAAlC9B,EAAiC,EAAjCA,OAAQC,EAAyB,EAAzBA,QAAS8B,EAAgB,EAAhBA,aACpDC,EAAczE,IAAMoB,WAAWrB,GADqC,EAE1CC,IAAMuD,SAAS,CAC7CrB,MAAM,EACNwC,aAAa,IAJ2D,mBAEnEX,EAFmE,KAEzDY,EAFyD,OAMtC3E,IAAMuD,SAAS,0DANuB,mBAMnEY,EANmE,KAMvDS,EANuD,OAOlD5E,IAAMuD,SAASkB,EAAYvC,MAPuB,mBAOnEA,EAPmE,KAO7D2C,EAP6D,OAQpC7E,IAAMuD,SAASkB,EAAYtC,OARS,mBAQnEuC,EARmE,KAQtDI,EARsD,KAU1E9E,IAAM4D,WAAU,WACdiB,EAAQJ,EAAYvC,MACpB4C,EAAeL,EAAYtC,SAC1B,CAACsC,EAAahC,IAEjB,IAAMsC,EAAgB,CACpB7C,KAAM2C,EACNH,YAAaI,GAGTE,EAAe,SAAC/B,EAAOf,EAAM+C,GACjCF,EAAc7C,GAAMe,GACpB,IAAMiC,EAAcC,OAAOC,OAAO,GAAIrB,GACtCmB,EAAYhD,GAAQ+C,EACpBN,EAAYO,IAkBRG,EAAa,WACjBC,YAAW,WACTX,EAAY,CAAEzC,MAAM,EAAMwC,aAAa,IACvCE,EAAc,4DACb,MASL,OACE,kBAACX,EAAD,CACExB,OAAQA,EACRC,QAAS,WACPA,IACA2C,KAEFxE,MAAM,4HACNqB,KAAK,OACLiC,WAAYA,EACZD,SAtCiB,SAACL,GACpBA,EAAI0B,iBACJX,EAAc,mEACdJ,EAAa,CACXtC,OACAC,MAAOuC,IAENrF,MAAK,WACJgG,OAEDG,OAAM,WACLZ,EAAc,4CA4BhBR,YAhBKe,OAAOM,OAAO1B,GAAU2B,QAAO,SAACC,EAAMC,GAC3C,OAAOD,GAAQC,MAiBf,kBAAC/C,EAAD,CACEQ,KAAK,OACLlD,UAAU,eACV+B,KAAK,OACLa,UAAQ,EACRI,UAAU,IACVD,UAAU,KACVJ,QAAQ,uDACRG,MAAOf,GAAQ,GACfoB,OAAQb,EACRW,SAAU4B,IAEZ,kBAACnC,EAAD,CACEQ,KAAK,OACLlD,UAAU,eACV+B,KAAK,cACLa,UAAQ,EACRI,UAAU,IACVD,UAAU,MACVI,OAAQb,EACRQ,MAAOyB,GAAe,GACtBtB,SAAU4B,KC1FH,SAASa,EAAT,GAA+D,IAApCpD,EAAmC,EAAnCA,OAAQC,EAA2B,EAA3BA,QAASoD,EAAkB,EAAlBA,eAAkB,EACvC9F,IAAMuD,SAAS,0DADwB,mBACpEY,EADoE,KACxDS,EADwD,OAE3C5E,IAAMuD,UAAS,GAF4B,mBAEpEQ,EAFoE,KAE1DY,EAF0D,OAGrD3E,IAAMuD,SAAS,IAHsC,mBAGpE3C,EAHoE,KAG/DmF,EAH+D,KAwBrEV,EAAa,WACjBC,YAAW,WACTS,EAAO,IACPnB,EAAc,4DACb,MAGL,OACE,kBAACX,EAAD,CACExB,OAAQA,EACRC,QAAS,WACPA,IACA2C,KAEFxE,MAAM,wFACNqB,KAAK,SACLiC,WAAYA,EACZD,SA9BiB,SAACL,GACpBA,EAAI0B,iBACJX,EAAc,mEAEdkB,EAAelF,GACZvB,MAAK,WACJgG,OAEDG,OAAM,WACLZ,EAAc,4CAsBhBR,YAAaL,GAEb,kBAAClB,EAAD,CAEEQ,KAAK,MACLlD,UAAU,eACV2C,QAAQ,iBACRZ,KAAK,SACLa,UAAQ,EACRC,YAAY,kFACZC,MAAOrC,EACP0C,OAAQb,EACRW,SAhDe,SAACH,EAAOf,EAAM6B,GACjCgC,EAAO9C,GACP0B,EAAYZ,OCRD,SAASiC,EAAT,GAAyD,IAAhCvD,EAA+B,EAA/BA,OAAQC,EAAuB,EAAvBA,QAASZ,EAAc,EAAdA,WAAc,EACrC9B,IAAMuD,SAAS,CAAE1C,OAAO,EAAOD,KAAK,IADC,mBAC9DmD,EAD8D,KACpDY,EADoD,OAEjC3E,IAAMuD,SAAS,8CAFkB,mBAE9DY,EAF8D,KAElDS,EAFkD,OAG3C5E,IAAMuD,SAAS,IAH4B,mBAG9D1C,EAH8D,KAGvDoF,EAHuD,OAI/CjG,IAAMuD,SAAS,IAJgC,mBAI9D3C,EAJ8D,KAIzDmF,EAJyD,KAM/DhB,EAAgB,CACpBlE,MAAOoF,EACPrF,IAAKmF,GAgBDf,EAAe,SAAC/B,EAAOf,EAAM+C,GACjCF,EAAc7C,GAAMe,GACpB,IAAMiC,EAAcC,OAAOC,OAAO,GAAIrB,GACtCmB,EAAYhD,GAAQ+C,EACpBN,EAAYO,IAGRG,EAAa,WACjBC,YAAW,WACTS,EAAO,IACPE,EAAS,IACTtB,EAAY,CAAE9D,OAAO,EAAOD,KAAK,IACjCgE,EAAc,gDACb,MASL,OACE,kBAACX,EAAD,CACExB,OAAQA,EACRC,QAAS,WACPA,IACA2C,KAEFxE,MAAM,gEACNqB,KAAK,MACLiC,WAAYA,EACZD,SA7CiB,SAACL,GACpBA,EAAI0B,iBACJX,EAAc,uDAEd9C,EAAW,CAAEI,KAAMrB,EAAOjB,KAAMgB,IAC7BvB,MAAK,WACJgG,OAEDG,OAAM,WACLZ,EAAc,4CAqChBR,YAhBKe,OAAOM,OAAO1B,GAAU2B,QAAO,SAACC,EAAMC,GAC3C,OAAOD,GAAQC,MAiBf,kBAAC/C,EAAD,CACEQ,KAAK,OACLlD,UAAU,eACV+B,KAAK,QACLa,UAAQ,EACRC,YAAY,mDACZG,UAAU,IACVD,UAAU,KACVD,MAAOpC,GAAS,GAChByC,OAAQb,EACRW,SAAU4B,IAEZ,kBAACnC,EAAD,CACEQ,KAAK,MACLlD,UAAU,eACV2C,QAAQ,iBACRZ,KAAK,MACLa,UAAQ,EACRC,YAAY,qGACZM,OAAQb,EACRQ,MAAOrC,GAAO,GACdwC,SAAU4B,KCjFH,SAASa,EAAT,GAAyD,IAA9BpD,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,QAAST,EAAY,EAAZA,SAAY,EACjCjC,IAAMuD,SAAS,gBADkB,mBAC9DY,EAD8D,KAClDS,EADkD,KAerE,OACE,kBAACX,EAAD,CACExB,OAAQA,EACRC,QAASA,EACT7B,MAAM,2DACNqB,KAAK,SACLiC,WAAYA,EACZD,SAnBiB,SAACL,GACpBA,EAAI0B,iBACJX,EAAc,uDACd3C,IACG5C,MAAK,WACJuF,EAAc,mBAEfY,OAAM,WACLZ,EAAc,4CAYhBR,aAAW,ICbF,SAAS8B,IAAO,IAAD,EACgBlG,IAAMuD,UAAS,GAD/B,mBACrB4C,EADqB,KACLC,EADK,OAEcpG,IAAMuD,UAAS,GAF7B,mBAErB8C,EAFqB,KAENC,EAFM,OAGoBtG,IAAMuD,UAAS,GAHnC,mBAGrBgD,EAHqB,KAGHC,EAHG,OAIoBxG,IAAMuD,UAAS,GAJnC,mBAIrBkD,EAJqB,KAIHC,EAJG,OAKc1G,IAAMuD,UAAS,GAL7B,mBAKrBoD,EALqB,KAKNC,EALM,OAMY5G,IAAMuD,SAAS,IAN3B,mBAMrBsD,EANqB,KAMPC,EANO,OAOU9G,IAAMuD,SAAS,IAPzB,mBAOrBkB,EAPqB,KAORsC,EAPQ,OAQF/G,IAAMuD,SAAS,IARb,mBAQrBxB,EARqB,KAQdiF,EARc,KAUtBC,EAAU,SAACC,GAAD,OAASC,QAAQC,IAAIF,IAErClH,IAAM4D,WAAU,WACd3E,QAAQoI,IAAI,CAAC9I,EAAI+I,qBAAsB/I,EAAIgJ,oBACxClI,MAAK,SAAC4D,GACL8D,EAAe9D,EAAM,IACrB+D,EAAS/D,EAAM,OAEhBuC,MAAMyB,KACR,IAEH,IAmBMO,EAAiB,WACrBpB,GAAkB,GAClBE,GAAiB,GACjBE,GAAoB,GACpBE,GAAoB,GACpBE,GAAiB,GACjBE,EAAgB,KAoBZW,EAAgB,uCAAG,WAAOjI,GAAP,eAAAkI,EAAA,6DACnBC,GAAe,EADI,SAEjBpJ,EACHqJ,YAAYpI,GACZH,MAAK,SAACP,GACLiI,EAAejI,GACf0I,IACAG,GAAe,KAEhBnC,MAAMyB,GATc,WAUnBU,EAVmB,yCAWd1I,QAAQ4I,WAXM,gCAahB5I,QAAQC,UAbQ,2CAAH,sDAgBhB4I,EAAkB,uCAAG,WAAO1F,GAAP,eAAAsF,EAAA,6DACrBC,GAAe,EADM,SAEnBpJ,EACHwJ,cAAc,CAAE3F,WAChB/C,MAAK,SAACP,GACLiI,EAAejI,GACf0I,IACAG,GAAe,KAEhBnC,MAAMyB,GATgB,WAUrBU,EAVqB,yCAWhB1I,QAAQ4I,WAXQ,gCAalB5I,QAAQC,UAbU,2CAAH,sDAgBlB8I,EAAoB,uCAAG,WAAOnI,GAAP,eAAA6H,EAAA,6DACvBC,GAAe,EADQ,SAErBpJ,EACH0J,WAAWpI,GACXR,MAAK,SAAC6I,GACLlB,EAAS,CAACkB,GAAF,mBAAcnG,KACtByF,IACAG,GAAe,KAEhBnC,MAAMyB,GATkB,WAUvBU,EAVuB,yCAWlB1I,QAAQ4I,WAXU,gCAapB5I,QAAQC,UAbY,2CAAH,sDAgBpBiJ,EAAkB,uCAAG,4BAAAT,EAAA,6DACrBC,GAAe,EADM,SAEnBpJ,EACH6J,WAAWvB,EAAavH,IACxBD,MAAK,SAACQ,GACL,IAAMwI,EAAWtG,EAAMuG,QAAO,SAACzI,GAAD,OAAUA,EAAKwB,MAAQwF,EAAavH,MAClE0H,EAASqB,GACTb,IACAG,GAAe,KAEhBnC,MAAMyB,GAVgB,WAWrBU,EAXqB,yCAYhB1I,QAAQ4I,WAZQ,gCAclB5I,QAAQC,UAdU,2CAAH,qDAiBxB,OACE,kBAACa,EAAmBwI,SAApB,CAA6BtF,MAAOwB,GAClC,kBAACvE,EAAD,MACA,kBAACyB,EAAD,CACEC,aA9EwB,WAC5B4E,GAAoB,IA8EhB3E,cAvFyB,WAC7BuE,GAAkB,IAuFdtE,WApFsB,WAC1BwE,GAAiB,IAoFb3F,YA7EkB,SAACd,GACvB+G,GAAiB,GACjBE,EAAgBjH,IA4EZkC,MAAOA,EACPC,OAvHiB,SAAC1C,EAAIgC,GAC1B,IAAMkH,EAAW,SAACN,GAChB,IAAMG,EAAWtG,EAAMM,KAAI,SAACxC,GAAD,OACzBA,EAAKwB,MAAQ6G,EAAQ7G,IAAM6G,EAAUrI,KAEvCmH,EAASqB,IAEP/G,EACF/C,EAAIkK,WAAWnJ,GAAID,KAAKmJ,GAAUhD,MAAMyB,GAExC1I,EAAImK,QAAQpJ,GAAID,KAAKmJ,GAAUhD,MAAMyB,IA8GnChF,SA1GmB,SAAC3C,GACxBwH,EAAgB,CAAExH,OAClBoH,GAAoB,MA0GlB,kBAACnG,EAAD,MACA,kBAACqC,EAAD,CACEF,QAAS8E,EACT3H,KAAMgH,EACNpE,OAAQkE,IAEV,kBAACpC,EAAD,CACE9B,OAAQ0D,EACRzD,QAAS8E,EACThD,aAAciD,IAEhB,kBAAC5B,EAAD,CACEpD,OAAQ8D,EACR7D,QAAS8E,EACT1B,eAAgBgC,IAElB,kBAAC9B,EAAD,CACEvD,OAAQ4D,EACR3D,QAAS8E,EACT1F,WAAYkG,IAEd,kBAAC,EAAD,CACEvF,OAAQgE,EACR/D,QAAS8E,EACTvF,SAAUkG,KCzKEQ,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAChD,EAAD,OAEFiD,SAASC,eAAe,SDyHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBlK,MAAK,SAAAmK,GACJA,EAAaC,gBAEdjE,OAAM,SAAAkE,GACLvC,QAAQuC,MAAMA,EAAMC,c","file":"static/js/main.52f2c947.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.e889e45f.svg\";","import { apiOptions } from \"./constants.js\";\r\n\r\nclass Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n    this._defaultCheck = (res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    };\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, { headers: this._headers }).then(\r\n      this._defaultCheck\r\n    );\r\n  }\r\n\r\n  getUserInformation() {\r\n    return fetch(`${this._baseUrl}/users/me`, { headers: this._headers }).then(\r\n      this._defaultCheck\r\n    );\r\n  }\r\n\r\n  setLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then(this._defaultCheck);\r\n  }\r\n\r\n  deleteLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._defaultCheck);\r\n  }\r\n\r\n  setUserInfo(object) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(object),\r\n    }).then(this._defaultCheck);\r\n  }\r\n\r\n  setUserAvatar(link) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(link),\r\n    }).then(this._defaultCheck);\r\n  }\r\n\r\n  createCard(card) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(card),\r\n    }).then(this._defaultCheck);\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._defaultCheck);\r\n  }\r\n}\r\n\r\nexport const api = new Api(apiOptions);\r\n","export const apiOptions = {\r\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-12\",\r\n  headers: {\r\n    authorization: \"10d0cab2-3de3-42ea-80c8-2e15574d2bdb\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from \"react\";\r\nimport logo from \"../images/logo.svg\";\r\n\r\nexport default function Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} alt=\"Логотип\" className=\"header__logo\" />\r\n    </header>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">\r\n        &copy; {new Date().getFullYear()} Mesto Russia\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function Card({\r\n  onCardClick,\r\n  url,\r\n  title,\r\n  likes,\r\n  ownerId,\r\n  cardId,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const { _id: userId } = React.useContext(CurrentUserContext);\r\n\r\n  const isLiked = likes.some((item) => {\r\n    return item._id === userId;\r\n  });\r\n  \r\n  return (\r\n    <div className=\"card\">\r\n      <img\r\n        alt=\"Изображение карточки\"\r\n        className=\"card__image\"\r\n        onClick={() => {\r\n          onCardClick({\r\n            url: url,\r\n            title: title,\r\n          });\r\n        }}\r\n        src={url}\r\n      />\r\n      <h2 className=\"card__title\">{title}</h2>\r\n      <button\r\n        onClick={() => {\r\n          onCardLike(cardId, isLiked);\r\n        }}\r\n        className={`card__like ${isLiked && \"card__like_mode_active\"}`}\r\n      ></button>\r\n      <p className=\"card__like-count\">{likes.length}</p>\r\n      {ownerId === userId && (\r\n        <button\r\n          className=\"card__delete\"\r\n          onClick={() => {\r\n            onCardDelete(cardId);\r\n          }}\r\n        ></button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nimport Card from \"./Card.js\";\r\n\r\nexport default function Main({\r\n  onEditAvatar,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onCardClick,\r\n  cards,\r\n  onLike,\r\n  onDelete,\r\n}) {\r\n\r\n  const { name, about, avatar } = React.useContext(CurrentUserContext);\r\n  \r\n  return (\r\n    <main>\r\n      <section className=\"profile\">\r\n        <div className=\"profile__inner-wrapper profile__inner-wrapper_place_profile\">\r\n          <img alt=\"Аватар\" className=\"profile__avatar\" src={avatar} />\r\n          <button\r\n            className=\"profile__avatar-overlay\"\r\n            onClick={onEditAvatar}\r\n          ></button>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__inner-wrapper profile__inner-wrapper_place_name\">\r\n              <h1 className=\"profile__name\">{name}</h1>\r\n              <button\r\n                className=\"profile__edit-button\"\r\n                onClick={onEditProfile}\r\n              ></button>\r\n            </div>\r\n            <p className=\"profile__subtitle\">{about}</p>\r\n          </div>\r\n        </div>\r\n        <button className=\"profile__add-button\" onClick={onAddPlace}></button>\r\n      </section>\r\n\r\n      <section className=\"card__container\">\r\n        {cards.map((item) => {\r\n          return (\r\n            <Card\r\n              onCardClick={onCardClick}\r\n              likes={item.likes}\r\n              ownerId={item.owner._id}\r\n              key={item._id}\r\n              title={item.name}\r\n              url={item.link}\r\n              cardId={item._id}\r\n              onCardLike={onLike}\r\n              onCardDelete={onDelete}\r\n            />\r\n          );\r\n        })}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Popup({ isOpen, onClose, children }) {\r\n  return (\r\n    <div className={`popup ${isOpen && \"popup_display_opened\"}`}>\r\n      {children}\r\n      <div className=\"popup__overlay\" onClick={onClose}></div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport Popup from \"./Popup\";\r\n\r\nexport default function PopupWithImage({ isOpen, card, onClose }) {\r\n  return (\r\n    <Popup isOpen={isOpen} onClose={onClose}>\r\n      <div className=\"popup__image-container\">\r\n        <img alt={card.title} className=\"popup__image\" src={card.url} />\r\n        <h2 className=\"popup__image-title\">{card.title}</h2>\r\n        <button className=\"popup__exit-button\" onClick={onClose}></button>\r\n      </div>\r\n    </Popup>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Input({\r\n  name,\r\n  pattern,\r\n  required,\r\n  placeholder,\r\n  value,\r\n  maxLength,\r\n  minLength,\r\n  onChange,\r\n  type,\r\n  update,\r\n}) {\r\n  const [isInputValid, setIsInputValid] = React.useState(true);\r\n  const [validationMessage, setValidationMessage] = React.useState(\"\");\r\n\r\n  React.useEffect(() => {\r\n    setIsInputValid(true);\r\n    setValidationMessage(\"\");\r\n  }, [update]);\r\n\r\n  const changeHandler = (evt) => {\r\n    onChange(evt.target.value, name, evt.target.validity.valid);\r\n    setIsInputValid(evt.target.validity.valid);\r\n    setValidationMessage(evt.target.validationMessage);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <input\r\n        type={type}\r\n        className={`popup__input ${\r\n          !isInputValid && \"popup__input_display_error\"\r\n        }`}\r\n        pattern={pattern}\r\n        name={name}\r\n        required={required}\r\n        placeholder={placeholder}\r\n        onChange={changeHandler}\r\n        value={value}\r\n        maxLength={maxLength}\r\n        minLength={minLength}\r\n      />\r\n      <span className=\"popup__input-error\">{validationMessage}</span>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport Popup from \"./Popup\";\r\n\r\nexport default function PopupWithForm({\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  title,\r\n  buttonText,\r\n  children,\r\n  name,\r\n  isFormValid,\r\n}) {\r\n  return (\r\n    <Popup isOpen={isOpen} onClose={onClose}>\r\n      <form\r\n        className=\"popup__container\"\r\n        name={name}\r\n        noValidate\r\n        onSubmit={onSubmit}\r\n      >\r\n        <h2 className=\"popup__title\">{title}</h2>\r\n        {children}\r\n        <button\r\n          type=\"submit\"\r\n          className={`popup__save ${\r\n            !isFormValid && \"popup__save_display_error\"\r\n          }`}\r\n          disabled={!isFormValid && \"disabled\"}\r\n        >\r\n          {buttonText}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"popup__exit-button\"\r\n          onClick={onClose}\r\n        ></button>\r\n      </form>\r\n    </Popup>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nimport Input from \"./ui/Input\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [validity, setValidity] = React.useState({\r\n    name: true,\r\n    description: true,\r\n  });\r\n  const [buttonText, setButtonText] = React.useState(\"Сохранить\");\r\n  const [name, setName] = React.useState(currentUser.name);\r\n  const [description, setDescription] = React.useState(currentUser.about);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, isOpen]);\r\n\r\n  const inputChangers = {\r\n    name: setName,\r\n    description: setDescription,\r\n  };\r\n\r\n  const inputHandler = (value, name, inputValidity) => {\r\n    inputChangers[name](value);\r\n    const newValidity = Object.assign({}, validity);\r\n    newValidity[name] = inputValidity;\r\n    setValidity(newValidity);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setButtonText(\"Сохранение...\");\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    })\r\n      .then(() => {\r\n        clearInput();\r\n      })\r\n      .catch(() => {\r\n        setButtonText(\"Ошибка\");\r\n      });\r\n  };\r\n\r\n  const clearInput = () => {\r\n    setTimeout(() => {\r\n      setValidity({ name: true, description: true });\r\n      setButtonText(\"Сохранить\");\r\n    }, 200);\r\n  };\r\n\r\n  const isFormValid = () => {\r\n    return Object.values(validity).reduce((summ, currentItem) => {\r\n      return summ && currentItem;\r\n    });\r\n  };\r\n  \r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={() => {\r\n        onClose();\r\n        clearInput();\r\n      }}\r\n      title=\"Редактировать профиль\"\r\n      name=\"edit\"\r\n      buttonText={buttonText}\r\n      onSubmit={handleSubmit}\r\n      isFormValid={isFormValid()}\r\n    >\r\n      <Input\r\n        type=\"text\"\r\n        className=\"popup__input\"\r\n        name=\"name\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        pattern=\"[ёЁА-Яа-яA-Za-z -]{1,}\"\r\n        value={name || \"\"}\r\n        update={isOpen}\r\n        onChange={inputHandler}\r\n      />\r\n      <Input\r\n        type=\"text\"\r\n        className=\"popup__input\"\r\n        name=\"description\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        update={isOpen}\r\n        value={description || \"\"}\r\n        onChange={inputHandler}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport Input from \"./ui/Input\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n  const [buttonText, setButtonText] = React.useState(\"Сохранить\");\r\n  const [validity, setValidity] = React.useState(false);\r\n  const [url, setUrl] = React.useState(\"\");\r\n  //  const inputRef = React.useRef() если использовать ref\r\n\r\n  const inputHandler = (value, name, validity) => {\r\n    setUrl(value);\r\n    setValidity(validity);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setButtonText(\"Сохранение...\");\r\n    // onUpdateAvatar(inputRef.current.value) если использовать ref\r\n    onUpdateAvatar(url)\r\n      .then(() => {\r\n        clearInput();\r\n      })\r\n      .catch(() => {\r\n        setButtonText(\"Ошибка\");\r\n      });\r\n  };\r\n\r\n  const clearInput = () => {\r\n    setTimeout(() => {\r\n      setUrl(\"\");\r\n      setButtonText(\"Сохранить\");\r\n    }, 200);\r\n  };\r\n  \r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={() => {\r\n        onClose();\r\n        clearInput();\r\n      }}\r\n      title=\"Обновить аватар\"\r\n      name=\"avatar\"\r\n      buttonText={buttonText}\r\n      onSubmit={handleSubmit}\r\n      isFormValid={validity}\r\n    >\r\n      <Input\r\n        //     ref={inputRef} если использовать ref, и использовать обычный input\r\n        type=\"url\"\r\n        className=\"popup__input\"\r\n        pattern=\".+\\.(jpg|png)\"\r\n        name=\"avatar\"\r\n        required\r\n        placeholder=\"Введите ссылку\"\r\n        value={url}\r\n        update={isOpen}\r\n        onChange={inputHandler}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport Input from \"./ui/Input\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n  const [validity, setValidity] = React.useState({ title: false, url: false });\r\n  const [buttonText, setButtonText] = React.useState(\"Создать\");\r\n  const [title, setTitle] = React.useState(\"\");\r\n  const [url, setUrl] = React.useState(\"\");\r\n\r\n  const inputChangers = {\r\n    title: setTitle,\r\n    url: setUrl,\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setButtonText(\"Создание...\");\r\n\r\n    onAddPlace({ name: title, link: url })\r\n      .then(() => {\r\n        clearInput();\r\n      })\r\n      .catch(() => {\r\n        setButtonText(\"Ошибка\");\r\n      });\r\n  };\r\n\r\n  const inputHandler = (value, name, inputValidity) => {\r\n    inputChangers[name](value);\r\n    const newValidity = Object.assign({}, validity);\r\n    newValidity[name] = inputValidity;\r\n    setValidity(newValidity);\r\n  };\r\n\r\n  const clearInput = () => {\r\n    setTimeout(() => {\r\n      setUrl(\"\");\r\n      setTitle(\"\");\r\n      setValidity({ title: false, url: false });\r\n      setButtonText(\"Создать\");\r\n    }, 200);\r\n  };\r\n\r\n  const isFormValid = () => {\r\n    return Object.values(validity).reduce((summ, currentItem) => {\r\n      return summ && currentItem;\r\n    });\r\n  };\r\n  \r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={() => {\r\n        onClose();\r\n        clearInput();\r\n      }}\r\n      title=\"Новое место\"\r\n      name=\"add\"\r\n      buttonText={buttonText}\r\n      onSubmit={handleSubmit}\r\n      isFormValid={isFormValid()}\r\n    >\r\n      <Input\r\n        type=\"text\"\r\n        className=\"popup__input\"\r\n        name=\"title\"\r\n        required\r\n        placeholder=\"Название\"\r\n        minLength=\"1\"\r\n        maxLength=\"30\"\r\n        value={title || \"\"}\r\n        update={isOpen}\r\n        onChange={inputHandler}\r\n      />\r\n      <Input\r\n        type=\"url\"\r\n        className=\"popup__input\"\r\n        pattern=\".+\\.(jpg|png)\"\r\n        name=\"url\"\r\n        required\r\n        placeholder=\"Ссылка на картинку\"\r\n        update={isOpen}\r\n        value={url || \"\"}\r\n        onChange={inputHandler}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function EditAvatarPopup({ isOpen, onClose, onDelete }) {\r\n  const [buttonText, setButtonText] = React.useState(\"Да\");\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setButtonText(\"Удаление...\");\r\n    onDelete()\r\n      .then(() => {\r\n        setButtonText(\"Да\");\r\n      })\r\n      .catch(() => {\r\n        setButtonText(\"Ошибка\");\r\n      });\r\n  };\r\n  \r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Вы уверены?\"\r\n      name=\"delete\"\r\n      buttonText={buttonText}\r\n      onSubmit={handleSubmit}\r\n      isFormValid\r\n    ></PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport { api } from \"../utils/Api\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport Main from \"./Main\";\r\nimport PopupWithImage from \"./PopupWithImage\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport DeleteCardPopup from \"./DeleteCardPopup\";\r\n\r\nexport default function App() {\r\n  const [editPopupState, setEditPopupState] = React.useState(false);\r\n  const [addPopupState, setAddPopupState] = React.useState(false);\r\n  const [avatarPopupState, setAvatarPopupState] = React.useState(false);\r\n  const [deletePopupState, setDeletePopupState] = React.useState(false);\r\n  const [imgPopupState, setImgPopupState] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  const errShow = (err) => console.log(err);\r\n\r\n  React.useEffect(() => {\r\n    Promise.all([api.getUserInformation(), api.getInitialCards()])\r\n      .then((value) => {\r\n        setCurrentUser(value[0]);\r\n        setCards(value[1]);\r\n      })\r\n      .catch(errShow);\r\n  }, []);\r\n\r\n  const handleCardLike = (id, isLiked) => {\r\n    const likeShow = (newCard) => {\r\n      const newCards = cards.map((card) =>\r\n        card._id === newCard._id ? newCard : card\r\n      );\r\n      setCards(newCards);\r\n    };\r\n    if (isLiked) {\r\n      api.deleteLike(id).then(likeShow).catch(errShow);\r\n    } else {\r\n      api.setLike(id).then(likeShow).catch(errShow);\r\n    }\r\n  };\r\n\r\n  const handleCardDelete = (id) => {\r\n    setSelectedCard({ id });\r\n    setDeletePopupState(true);\r\n  };\r\n\r\n  const closeAllPopups = () => {\r\n    setEditPopupState(false);\r\n    setAddPopupState(false);\r\n    setAvatarPopupState(false);\r\n    setDeletePopupState(false);\r\n    setImgPopupState(false);\r\n    setSelectedCard({});\r\n  };\r\n\r\n  const isEditProfilePopupOpen = () => {\r\n    setEditPopupState(true);\r\n  };\r\n\r\n  const isAddPlacePopupOpen = () => {\r\n    setAddPopupState(true);\r\n  };\r\n\r\n  const isEditAvatarPopupOpen = () => {\r\n    setAvatarPopupState(true);\r\n  };\r\n\r\n  const handleCardClick = (card) => {\r\n    setImgPopupState(true);\r\n    setSelectedCard(card);\r\n  };\r\n\r\n  const handleUpdateUser = async (object) => {\r\n    let isSucssesful = false;\r\n    await api\r\n      .setUserInfo(object)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n        isSucssesful = true;\r\n      })\r\n      .catch(errShow);\r\n    if (isSucssesful) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const handleUpdateAvatar = async (avatar) => {\r\n    let isSucssesful = false;\r\n    await api\r\n      .setUserAvatar({ avatar })\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n        isSucssesful = true;\r\n      })\r\n      .catch(errShow);\r\n    if (isSucssesful) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  const handleAddPlaceSubmit = async (card) => {\r\n    let isSucssesful = false;\r\n    await api\r\n      .createCard(card)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n        isSucssesful = true;\r\n      })\r\n      .catch(errShow);\r\n    if (isSucssesful) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject();\r\n  };\r\n  \r\n  const handleDeleteSubmit = async () => {\r\n    let isSucssesful = false;\r\n    await api\r\n      .deleteCard(selectedCard.id)\r\n      .then((card) => {\r\n        const newCards = cards.filter((card) => card._id !== selectedCard.id);\r\n        setCards(newCards);\r\n        closeAllPopups();\r\n        isSucssesful = true;\r\n      })\r\n      .catch(errShow);\r\n    if (isSucssesful) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.reject();\r\n  };\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <Header />\r\n      <Main\r\n        onEditAvatar={isEditAvatarPopupOpen}\r\n        onEditProfile={isEditProfilePopupOpen}\r\n        onAddPlace={isAddPlacePopupOpen}\r\n        onCardClick={handleCardClick}\r\n        cards={cards}\r\n        onLike={handleCardLike}\r\n        onDelete={handleCardDelete}\r\n      />\r\n      <Footer />\r\n      <PopupWithImage\r\n        onClose={closeAllPopups}\r\n        card={selectedCard}\r\n        isOpen={imgPopupState}\r\n      />\r\n      <EditProfilePopup\r\n        isOpen={editPopupState}\r\n        onClose={closeAllPopups}\r\n        onUpdateUser={handleUpdateUser}\r\n      />\r\n      <EditAvatarPopup\r\n        isOpen={avatarPopupState}\r\n        onClose={closeAllPopups}\r\n        onUpdateAvatar={handleUpdateAvatar}\r\n      />\r\n      <AddPlacePopup\r\n        isOpen={addPopupState}\r\n        onClose={closeAllPopups}\r\n        onAddPlace={handleAddPlaceSubmit}\r\n      />\r\n      <DeleteCardPopup\r\n        isOpen={deletePopupState}\r\n        onClose={closeAllPopups}\r\n        onDelete={handleDeleteSubmit}\r\n      />\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App.js\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}